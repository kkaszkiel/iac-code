---
- name: Install nginx, issue a cert for domain using acme.sh and Let's Encrypt, install certificate
  hosts: aws_ec2
  become: yes
  tasks:
    
  - name: Install the latest version of Nginx
    ansible.builtin.dnf:
      name: nginx
      state: latest

  - name: Enable service nginx and ensure it is not masked
    ansible.builtin.systemd:
      name: nginx
      enabled: true
      masked: no

  - name: Make sure a service unit is running
    ansible.builtin.systemd:
      state: started
      name: nginx




  - name: Install the latest version of Cronie
    ansible.builtin.dnf:
      name: cronie
      state: latest

  - name: Enable service cronie and ensure it is not masked
    ansible.builtin.systemd:
      name: crond
      enabled: true
      masked: no

  - name: Make sure a service unit is running
    ansible.builtin.systemd:
      state: started
      name: crond